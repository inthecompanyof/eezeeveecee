var BareGraphs=BareGraphs||{};BareGraphs.controls=function(){var e,t,a=$(".forecast")[0],o=$("input[name='time']",a).autoNumeric("init",{vMin:0,vMax:60,mDec:0,mDec:0,lZero:"deny"}),u=$("input[name='churn']",a).autoNumeric("init",{aSign:"%",pSign:"s",mDec:1,lZero:"deny"}),i=$("input[name='growth']",a).autoNumeric("init",{vMin:"-99999999999.99",aSign:"$",aPad:!1,mDec:0}),r=$("input[name='start']",a).autoNumeric("init",{aSign:"$",aPad:!1,mDec:0}),n={time:parseFloat(o.autoNumeric("get")),churn:parseFloat(u.autoNumeric("get")),growth:parseFloat(i.autoNumeric("get")),start:parseFloat(r.autoNumeric("get"))},c="lin",l=1;(e=function(){for(var e,t=((new Date).getMonth()+1)%12,n=[],l=0;l<o.val();l++)e=e||r.autoNumeric("get"),"lin"==c?e=e*(1-u.autoNumeric("get")/100)+parseFloat(i.autoNumeric("get")):(e*=1-u.autoNumeric("get")/100,e+=e*(i.autoNumeric("get")/100)),n.push({value:e,date:t}),t+=1,l==o.val()-1&&(BareGraphs.make(n,a),BareGraphs.data=n,$(".total",a).html(sanitizeCurrency(e)),$(".time",a).html(o.val()),$(".churn",a).html(u.val()),$(".growth",a).html(i.val()))})(),r.keydown(function(a){l=a.shiftKey?10:1,13==a.keyCode||9==a.keyCode?e():38==a.keyCode?(r.autoNumeric("set",parseFloat(r.autoNumeric("get"))+100*l),e()):40==a.keyCode?(r.autoNumeric("set",parseFloat(r.autoNumeric("get"))-100*l),e()):t=setTimeout(function(){e(),window.clearTimeout(t)},1e3)}),i.keydown(function(a){l=a.shiftKey?10:1,13==a.keyCode||9==a.keyCode?e():38==a.keyCode?"lin"==c?(i.autoNumeric("set",parseFloat(i.autoNumeric("get"))+100*l),e()):(i.autoNumeric("set",parseFloat(i.autoNumeric("get"))+.1*l),e()):40==a.keyCode?"lin"==c?(i.autoNumeric("set",parseFloat(i.autoNumeric("get"))-100*l),e()):(i.autoNumeric("set",parseFloat(i.autoNumeric("get"))-.1*l),e()):t=setTimeout(function(){e(),window.clearTimeout(t)},1e3)}),u.keydown(function(a){l=a.shiftKey?10:1,13==a.keyCode||9==a.keyCode?e():38==a.keyCode?(u.autoNumeric("set",parseFloat(u.autoNumeric("get"))+.1*l),e()):40==a.keyCode?(u.autoNumeric("set",parseFloat(u.autoNumeric("get"))-.1*l),e()):t=setTimeout(function(){e(),window.clearTimeout(t)},1e3)}),o.keydown(function(a){var u=setTimeout(function(){parseFloat(o.val())>1&&(l=a.shiftKey?6:1,13==a.keyCode||9==a.keyCode?e():38==a.keyCode?(o.autoNumeric("set",parseFloat(o.autoNumeric("get"))+1*l),e()):40==a.keyCode?(o.autoNumeric("set",parseFloat(o.autoNumeric("get"))-1*l),e()):t=setTimeout(function(){e(),window.clearTimeout(t)},1e3)),window.clearTimeout(u)},0)}),$(".toggletainer input[type='checkbox']",a).click(function(){var t;this.checked?(t=i.data("exp")||20,$(".lin",a).removeClass("blue"),$(".exp",a).addClass("blue"),$(".type",a).html("exponential"),i.data("lin",i.autoNumeric("get")),i.val(t).autoNumeric("update",{aSign:"%",pSign:"s",aPad:!0,mDec:1,lZero:"deny"}),c="exp"):(t=i.data("lin")||2500,$(".exp",a).removeClass("blue"),$(".lin",a).addClass("blue"),$(".type",a).html("linear"),i.data("exp",i.autoNumeric("get")),i.val(t).autoNumeric("update",{aSign:"$",pSign:"p",aPad:!1,mDec:0,lZero:"allow"}),c="lin"),e()}),$(".reset").click(function(t){t.preventDefault(),"exp"==c&&($(".check",a).prop("checked",!1),$(".exp",a).removeClass("blue"),$(".lin",a).addClass("blue"),$(".type",a).html("linear"),i.data("exp",i.autoNumeric("get")),c="lin"),o.autoNumeric("set",n.time),u.autoNumeric("set",n.churn),i.val(n.growth).autoNumeric("update",{aSign:"$",pSign:"p",aPad:!1,mDec:0,lZero:"allow"}),r.autoNumeric("set",n.start),e()})};