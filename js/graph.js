var BareGraphs=BareGraphs||{};BareGraphs.graph=function(t){function a(){var a=$(this).width()<600?600:$(this).width(),e=$(this).height(),c=d3.scale.linear().domain([r-s,i+s]).range([e-32,9]),u=d3.scale.linear().domain(d3.extent(n)).range([l-9,a-18]),d=d3.select(this).select("svg");d.empty()&&(d=d3.select(this).append("svg")),d.attr("width",a).attr("height",e);var h=d3.svg.axis().scale(c).tickFormat(function(t){return sanitizeCurrency(t)}).ticks(4).tickSize(a-l-9).tickPadding(9).orient("left");h=$(".axis--y",this).length?d.select(".axis--y").transition().duration(500).ease("sin-in-out").call(h):d.append("g").call(h),h.attr({"class":"axis axis--y",transform:"translate("+[a-18,0]+")"});var p=d3.svg.axis().scale(u).tickFormat(o).orient("bottom");p=$(".axis--x",this).length?d.select(".axis--x").transition().duration(500).ease("sin-in-out").call(p):d.append("g").call(p),p.attr({"class":"axis axis--x",transform:"translate("+[0,e-32]+")"});var v=d3.svg.area().x(function(t){return u(t.date)}).y0(e-32).y1(function(t){return c(t.value)});$(".area",this).length?d.select(".area").data([t]).transition().duration(300).attr("d",v):d.append("path").data([t]).attr({"class":"area",d:v});var g=d3.svg.line().x(function(t){return u(t.date)}).y(function(t){return c(t.value)});$(".path",this).length?d.select(".path").data([t]).transition().duration(300).attr("d",g):d.append("path").data([t]).attr({"class":"path",d:g,fill:"none","stroke-width":3});var f=d.selectAll("svg > circle").data(t);f.enter().append("circle"),f.attr({r:6,stroke:"white","stroke-width":2}).transition().duration(300).attr({cx:function(t){return u(t.date)},cy:function(t){return c(t.value)}}),f.exit().remove();var x=d.selectAll("svg > text").data(t);x.enter().append("text"),x.attr({x:function(t){return u(t.date)},y:function(t){return c(t.value)-20},opacity:0,transform:"translate("+[0,10]+")","text-anchor":function(t,a){return 0==a?"start":a==n.length-1?"end":"middle"}}).text(function(t){return sanitizeCurrency(t.value)}),x.exit().remove();var m=d.selectAll("svg > rect").data(t);m.enter().append("rect"),m.attr({x:function(t,e){return e*(a+27-l)/n.length+l-27},y:0,width:(a+27-l)/n.length,height:e,fill:"transparent"}).on("mouseover",function(t,a){d3.select(d.selectAll("svg > text")[0][a]).transition().duration(200).attr({opacity:1,transform:"translate("+[0,0]+")"})}).on("mouseout",function(){d.selectAll("svg > text").transition().duration(200).attr({opacity:0,transform:"translate("+[0,10]+")"})}),m.exit().remove()}var e=$.map(t,function(t){return t.value}),n=$.map(t,function(t){return t.date}),r=d3.min(e),i=d3.max(e),s=.15*(i-r),l=getOffset(r,i),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=function(t){return c[t%12]};return a},BareGraphs.make=function(t,a){d3.select(a).select(".graph").each(BareGraphs.graph(t))};